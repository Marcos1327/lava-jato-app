<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lava Jato App</title>

    <!-- Script para lidar com rotas do GitHub Pages -->
    <script type="text/javascript">
        (function (l) {
            console.log("URL original:", l.href);

            if (l.search[1] === '/') {
                console.log("A query começa com '/' → precisa ser ajustada");

                var sliced = l.search.slice(1);
                console.log("Query sem '?':", sliced);

                var parts = sliced.split('&');
                console.log("Partes divididas por '&':", parts);

                // Agora usando 'parts' diretamente dentro do map
                var replaced = parts.map(function (s) {
                    var fixed = s.replace(/~and~/g, '&');
                    console.log("Revertendo ~and~ →", s, " => ", fixed);
                    return fixed;
                });

                var decoded = replaced.join('?');
                console.log("Query decodificada:", decoded);

                var newUrl = l.pathname + decoded + l.hash;
                console.log("Nova URL final:", newUrl);

                window.history.replaceState(null, null, newUrl);
                console.log("✅ URL substituída no navegador!");
            } else {
                console.log("Nada a corrigir, query não começa com '/'");
            }
        }(window.location))
    </script>
</head>

<body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
</body>

</html>